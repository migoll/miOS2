@import url("https://fonts.googleapis.com/css2?family=Geist+Mono:wght@300;400;500;600;700&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: "Geist Mono", ui-monospace, monospace;
  line-height: 1.6;
  font-weight: 400;
  color-scheme: dark;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #111111;
  font-family: "Geist Mono", ui-monospace, monospace;
  font-weight: 400;
  transition: background-color 0.2s ease-in-out;
}

body.light {
  background: #f0f0f0;
  color-scheme: light;
}

#root {
  width: 100%;
  height: 100%;
}

/* Vercel Design System Components */
@layer components {
  /* Window styling - minimal and clean */
  .vercel-window {
    @apply bg-vercel-light-panel dark:bg-vercel-dark-panel;
    @apply border border-vercel-light-border dark:border-vercel-dark-border;
    @apply rounded-md shadow-vercel-window;
    @apply transition-all duration-200 ease-in-out;
  }

  .vercel-window-titlebar {
    @apply bg-vercel-light-panel dark:bg-vercel-dark-panel;
    @apply border-b border-vercel-light-border dark:border-vercel-dark-border;
    @apply h-8 flex items-center justify-between px-4;
    @apply font-mono text-sm font-medium;
    @apply text-vercel-light-text dark:text-vercel-dark-text;
  }

  /* Traffic lights - minimal circles */
  .vercel-traffic-light {
    @apply w-3 h-3 rounded-full border;
    @apply border-vercel-light-border dark:border-vercel-dark-border;
    @apply transition-all duration-150 ease-in-out;
    @apply cursor-pointer;
  }

  .vercel-traffic-light:hover {
    @apply scale-105;
  }

  .vercel-traffic-light.close {
    @apply bg-red-500;
  }

  .vercel-traffic-light.minimize {
    @apply bg-yellow-500;
  }

  .vercel-traffic-light.maximize {
    @apply bg-green-500;
  }

  /* Menu bar - ultra minimal */
  .vercel-menu-bar {
    @apply bg-vercel-light-panel/95 dark:bg-vercel-dark-panel/95;
    @apply border-b border-vercel-light-border dark:border-vercel-dark-border;
    @apply backdrop-blur-sm h-8;
    @apply flex items-center justify-between px-4;
    @apply font-mono text-sm;
    @apply text-vercel-light-text dark:text-vercel-dark-text;
  }

  /* Buttons - flat and minimal */
  .vercel-button {
    @apply px-4 py-2 rounded border;
    @apply border-vercel-light-border dark:border-vercel-dark-border;
    @apply bg-vercel-light-panel dark:bg-vercel-dark-panel;
    @apply text-vercel-light-text dark:text-vercel-dark-text;
    @apply font-mono text-sm font-medium;
    @apply transition-all duration-150 ease-in-out;
    @apply shadow-vercel-button;
  }

  .vercel-button:hover {
    @apply bg-white/10 dark:bg-white/10;
    @apply border-gray-400 dark:border-white/40;
  }

  .vercel-button:focus {
    @apply outline-none shadow-vercel-focus;
  }

  .vercel-button:active {
    @apply scale-95;
  }

  /* Inputs - underlined or minimal border */
  .vercel-input {
    @apply px-3 py-2 rounded border;
    @apply border-vercel-light-border dark:border-vercel-dark-border;
    @apply bg-vercel-light-panel dark:bg-vercel-dark-panel;
    @apply text-vercel-light-text dark:text-vercel-dark-text;
    @apply font-mono text-sm;
    @apply transition-all duration-150 ease-in-out;
  }

  .vercel-input:focus {
    @apply outline-none border-gray-400 dark:border-white/40;
    @apply shadow-vercel-focus;
  }

  /* Panels - floating with minimal shadows */
  .vercel-panel {
    @apply bg-vercel-light-panel dark:bg-vercel-dark-panel;
    @apply border border-vercel-light-border dark:border-vercel-dark-border;
    @apply rounded-md shadow-vercel-panel;
    @apply font-mono;
  }

  /* Context menu */
  .vercel-context-menu {
    @apply vercel-panel;
    @apply py-1 min-w-48;
    @apply animate-slide-in;
    @apply flex flex-col;
  }

  .vercel-context-item {
    @apply px-3 py-2 text-sm;
    @apply text-vercel-light-text dark:text-vercel-dark-text;
    @apply hover:bg-gray-200 dark:hover:bg-white/10;
    @apply cursor-pointer transition-colors duration-150;
    @apply font-mono;
    @apply flex items-center justify-start text-left w-full;
  }

  /* Desktop icons - Windows-style layout */
  .vercel-desktop-icon {
    @apply flex flex-col items-center justify-start;
    @apply cursor-pointer;
    @apply transition-all duration-150 ease-in-out;
    @apply font-mono;
    @apply text-vercel-light-text dark:text-vercel-dark-text;
    width: 90px;
    height: 75px;
    padding: 4px;
    font-size: 12px;
    /* Ensure crisp rendering */
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    backface-visibility: hidden;
    transform: translateZ(0);
  }

  /* Consistent white hover effect for all states - using box-shadow to prevent movement */
  .vercel-desktop-icon:hover:not(.no-hover),
  .vercel-desktop-icon.selected,
  .vercel-desktop-icon.selection-preview,
  .vercel-desktop-icon.dragging {
    background-color: rgba(255, 255, 255, 0.1);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2),
      0 0 0 1px rgba(255, 255, 255, 0.3);
    border-radius: 2px;
    /* Prevent subpixel rendering issues */
    will-change: auto;
    contain: layout;
  }

  /* Light mode selection states - darker colors */
  body.light .vercel-desktop-icon:hover:not(.no-hover),
  body.light .vercel-desktop-icon.selected,
  body.light .vercel-desktop-icon.selection-preview,
  body.light .vercel-desktop-icon.dragging {
    background-color: rgba(0, 0, 0, 0.1);
    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(0, 0, 0, 0.4);
  }

  /* Dark mode selection states - white colors */
  body.dark .vercel-desktop-icon:hover:not(.no-hover),
  body.dark .vercel-desktop-icon.selected,
  body.dark .vercel-desktop-icon.selection-preview,
  body.dark .vercel-desktop-icon.dragging {
    background-color: rgba(255, 255, 255, 0.1);
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2),
      0 0 0 1px rgba(255, 255, 255, 0.3);
  }

  /* Ensure text stays white with drop shadow for all states */
  .vercel-desktop-icon.selected .icon-text,
  .vercel-desktop-icon.selection-preview .icon-text,
  .vercel-desktop-icon.dragging .icon-text {
    color: white !important;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9), 0 1px 2px rgba(0, 0, 0, 0.95) !important;
  }

  /* Light mode selected text shadow */
  body.light .vercel-desktop-icon.selected .icon-text,
  body.light .vercel-desktop-icon.selection-preview .icon-text,
  body.light .vercel-desktop-icon.dragging .icon-text {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.95), 0 1px 2px rgba(0, 0, 0, 0.98) !important;
  }

  /* Dark mode selected text shadow */
  body.dark .vercel-desktop-icon.selected .icon-text,
  body.dark .vercel-desktop-icon.selection-preview .icon-text,
  body.dark .vercel-desktop-icon.dragging .icon-text {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9), 0 1px 2px rgba(0, 0, 0, 0.95) !important;
  }

  /* Smooth launcher animation */
  @keyframes slide-in-from-top {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }

  .animate-slide-in-from-top {
    animation: slide-in-from-top 0.2s ease-out forwards;
  }

  /* Icon text for Windows layout - centered under icon */
  .icon-text {
    width: 82px; /* Slightly less than container for padding */
    text-align: center;
    line-height: 1.1;
    font-size: 12px;
    margin-top: 2px;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    max-height: 24px; /* Allow for 2 lines max */
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    color: white;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9), 0 1px 2px rgba(0, 0, 0, 0.95);
  }

  /* Light mode text shadow */
  body.light .icon-text {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.95), 0 1px 2px rgba(0, 0, 0, 0.98);
  }

  /* Dark mode text shadow */
  body.dark .icon-text {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9), 0 1px 2px rgba(0, 0, 0, 0.95);
  }

  /* For very long single words, use ellipsis */
  .icon-text.single-word {
    white-space: nowrap;
    text-overflow: ellipsis;
    -webkit-line-clamp: unset;
    display: block;
  }

  /* Taskbar */
  .vercel-taskbar {
    @apply vercel-panel;
    @apply flex items-center gap-2 px-4 py-2;
  }

  .vercel-taskbar-item {
    @apply w-12 h-12 flex items-center justify-center;
    @apply rounded border border-transparent;
    @apply transition-all duration-150 ease-in-out;
    @apply cursor-pointer;
  }

  .vercel-taskbar-item:hover {
    @apply border-gray-300 dark:border-gray-600;
    @apply bg-white/10 dark:bg-white/10;
  }

  .vercel-taskbar-item.focused {
    @apply border-white/40 dark:border-white/40;
    @apply bg-white/20 dark:bg-white/20;
  }

  /* Scrollbars */
  .vercel-scrollbar::-webkit-scrollbar {
    @apply w-2;
    z-index: 50;
  }

  .vercel-scrollbar::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  .vercel-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-400 dark:bg-white/40;
    @apply rounded-full;
  }

  .vercel-scrollbar::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500 dark:bg-white/60;
  }
}
